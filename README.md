# Express + MongoDB —É Docker

## üìå –Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏:

1. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å [Docker](https://www.docker.com/get-started)
2. –ö–ª–æ–Ω—É–≤–∞—Ç–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:
3. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏:
4. –í—ñ–¥–∫—Ä–∏—Ç–∏ —É –±—Ä–∞—É–∑–µ—Ä—ñ:

## üõ† –ö–æ–º–∞–Ω–¥–∏ –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏:

- –ó–∞–ø—É—Å—Ç–∏—Ç–∏: `docker-compose up -d`
- –ó—É–ø–∏–Ω–∏—Ç–∏: `docker-compose down`
- –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏: `docker ps`
- –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ª–æ–≥–∏: `docker-compose logs -f`
- –í–∏–¥–∞–ª–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ —Ç–∞ –æ—á–∏—â–µ–Ω–Ω—è —Ç–æ–º—ñ–≤: `docker-compose down -v`
- –ü–µ—Ä–µ–≥–ª—è–¥ –ø—Ä–∞—Ü—é—é—á–∏—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤: `docker ps`
- –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–æ–¥–∞—Ç–∫—É: `docker-compose logs -f app`
- –û—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–æ—Å—Ç—É–ø—É –¥–æ MongoDB —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ: `docker exec -it <mongo-container-id> mongosh`

### –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ MongoDB

- docker exec -it mongo_container mongosh

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –±–∞–∑–∏ –¥–∞–Ω–∏—Ö studentDB

- use studentDB

### –î–æ–¥–∞–≤–∞–Ω–Ω—è 5 –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤

db.assignments.insertMany([

- { name: "–Ü–≤–∞–Ω", subject: "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞", score: 78 },
- { name: "–ú–∞—Ä—ñ—è", subject: "–§—ñ–∑–∏–∫–∞", score: 85 },
- { name: "–ü–µ—Ç—Ä–æ", subject: "–•—ñ–º—ñ—è", score: 90 },
- { name: "–û–∫—Å–∞–Ω–∞", subject: "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞", score: 88 },
- { name: "–ê–Ω–¥—Ä—ñ–π", subject: "–§—ñ–∑–∏–∫–∞", score: 82 }
  ])

### –ó–∞–ø–∏—Ç: –∑–Ω–∞–π—Ç–∏ –≤—Å—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏, –¥–µ score –±—ñ–ª—å—à–µ 80

- db.assignments.find({ score: { $gt: 80 } })

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è: –∑–±—ñ–ª—å—à–∏—Ç–∏ score –Ω–∞ 5 –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞, —É —è–∫–æ–≥–æ –±–∞–ª –º–µ–Ω—à–µ 85

- db.assignments.updateOne({ score: { $lt: 85 } }, { $inc: { score: 5 } })

### –í–∏–¥–∞–ª–µ–Ω–Ω—è —Å—Ç—É–¥–µ–Ω—Ç–∞ –∑ –Ω–∞–π–Ω–∏–∂—á–∏–º –±–∞–ª–æ–º

- db.assignments.find().sort({ score: 1 }).limit(1).forEach(doc => db.assignments.deleteOne({ \_id: doc.\_id }))

### –í–∏–≤–µ—Å—Ç–∏ —Ç—ñ–ª—å–∫–∏ —ñ–º'—è —Ç–∞ –±–∞–ª —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤

- db.assignments.find({}, { \_id: 0, name: 1, score: 1 })

### –ê–≥—Ä–µ–≥–∞—Ü—ñ—è: —Å–µ—Ä–µ–¥–Ω—ñ–π –±–∞–ª –∑–∞ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏ (>75)

- db.assignments.aggregate([
  { $group: { _id: "$subject", averageScore: { $avg: "$score" } } },
  { $match: { averageScore: { $gt: 75 } } }
  ])
